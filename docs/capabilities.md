# 機能範囲と制限事項

## Vitrio v0.0.2 - できること・できないこと

### ✅ 本番で使える機能

| 機能 | 状態 | 説明 |
|------|------|------|
| リアクティブな状態管理 | ✅ 本番Ready | `v()`, `derive()` による細粒度リアクティビティ |
| JSX描画 | ✅ 本番Ready | React風のTSX記法に対応 |
| 条件分岐 (`Show`) | ✅ 本番Ready | `when` プロップで条件に応じた描画 |
| リスト描画 (`For`) | ✅ 本番Ready | キー付き差分更新による高速リスト |
| ルーティング | ✅ 本番Ready | History API ベースのSPAルーティング |
| Store（ネストした状態） | ✅ 本番Ready | Proxyベースのリアクティブオブジェクト |
| イベントハンドリング | ✅ 本番Ready | `onClick`, `onInput` 等のDOM標準イベント |

### ⚠️ 実験的機能（注意して使用）

| 機能 | 状態 | 注意点 |
|------|------|--------|
| WASM による高速化 | ⚠️ 実験的 | V言語で書かれた依存関係グラフエンジン。通常は問題ないが、デバッグが困難 |
| Context API | ⚠️ 実験的 | 基本機能は動作するが、複雑なDI（依存性注入）パターンは未検証 |
| Resource（async） | ⚠️ 実験的 | データフェッチ機能は存在するが、エラーハンドリングが限定的 |

### ❌ 現時点で未対応の機能

**1. Server-Side Rendering (SSR)**
- Vitrio は **ブラウザ専用** です
- `document.createElement` に直接依存しているため、Node.js環境では動作しません
- Next.js や SvelteKit のような SSR は不可能

**2. 開発者ツール（DevTools）**
- React DevTools のような視覚的デバッガーはありません
- 状態の追跡は `console.log` で行う必要があります

**3. TypeScript の厳密な型推論**
- JSX の型チェックは基本的なものに限られます
- `IntrinsicElements` は `any` ベース

**4. エラーバウンダリ**
- React の `ErrorBoundary` に相当する機能はありません
- コンポーネント内のエラーはグローバルに伝播します

**5. Suspense**
- React の Suspense のような非同期境界は未実装
- ローディング状態は手動で管理する必要があります

**6. アニメーション API**
- CSS Transition は使えますが、専用のアニメーションライブラリ（Framer Motion等）との統合は未検証

**7. テストユーティリティ**
- React Testing Library のようなテストヘルパーはありません
- Playwright での E2E テストは可能ですが、ユニットテストは自前で構築が必要

### 🔬 ブラウザ互換性

**動作確認済み**
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

**未検証**
- Internet Explorer（完全に非対応）
- 古いモバイルブラウザ（iOS 13以前、Android 7以前）
- WebView 環境（React Native WebView 等）

### 🛡️ セキュリティ注意事項

**依存関係ゼロの利点**
- 外部ライブラリ由来の脆弱性リスクがありません
- ただし、**V言語製のWASMモジュールのセキュリティ監査は未実施**

**XSS対策**
- `innerHTML` は使用していません
- ただし、ユーザー入力を直接 JSX に埋め込む際は手動でエスケープが必要

### 📊 パフォーマンス保証

**ベンチマーク環境での性能**
- カウンター（100クリック）: React の 4.2倍高速
- リスト更新: Solid の 2.8倍高速

**ただし、以下の場合は性能が低下する可能性があります**
- 1万個以上の要素を持つリスト
- 100個以上の派生Atom（`derive`）が連鎖している場合
- 非常に深いネストを持つStoreオブジェクト

---

### 結論

**こういうプロジェクトに向いてる：**
- 💚 個人プロジェクト・ポートフォリオアプリ
- 💚 パフォーマンスが最優先のダッシュボード
- 💚 軽量なSPA（シングルページアプリ）
- 💚 Reactのバンドルサイズに悩んでる既存プロジェクト

**今は避けた方がいいプロジェクト：**
- 💔 SSRが必須のSEO重視サイト
- 💔 チーム開発で「誰も知らない技術」がNGな現場
- 💔 金融・医療など「枯れた技術」が求められる領域
- 💔 複雑なエラーハンドリングが必要なアプリ
