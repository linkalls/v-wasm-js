# V言語のWeb Frontend利用に関する調査報告

V言語のJSおよびWASMビルドを試し、ファイルサイズや最適化について調査しました。

## 調査結果

シンプルなフィボナッチ数列計算プログラム(`src/main.v`)を使用して検証しました。

### JavaScriptビルド (`v -b js`)

*   **開発ビルド**: 約154KB
*   **本番ビルド (`-prod`)**: 約131KB
*   **動作確認**: Node.jsで動作確認済み。
*   **所感**: ランタイムが含まれるため、「Hello World」レベルとしてはやや大きめですが、実用的なWebアプリケーションとしては許容範囲内と考えられます。生成されるJSは可読性があり、既存のJSエコシステムとの連携もしやすい形式です。

### WebAssemblyビルド (`v -b wasm`)

*   **開発ビルド**: 約4.4KB
*   **本番ビルド (`-prod`)**: 約1.7KB
*   **所感**:
    *   **サイズ**: 非常に軽量です。GoやBlazorのような重厚なランタイムを含まないため、RustやCに近いサイズ感です。
    *   **使い勝手**: デフォルトでは`.wasm`ファイルのみが生成され、それを読み込むためのJavaScriptグルーコード（ローダー）は自動生成されません。実際にWebで使用するには、`WebAssembly.instantiateStreaming`などを使って自前でロード処理を書く必要があります。
    *   **最適化**: `-prod`オプションをつけることで、`binaryen` (wasm-opt) による最適化が行われ、サイズが半分以下になりました。

## 結論

*   **実用性**: 十分に実用レベルにあると言えます。特にWASMのサイズは魅力的です。
*   **JavaScript**: 手軽に使いたい場合や、既存のJSプロジェクトにロジックを組み込むのに適しています。
*   **WASM**: パフォーマンスやバイナリサイズを極限まで小さくしたい場合に適していますが、ローダーを自作する必要があるため、やや上級者向けです。

以上
