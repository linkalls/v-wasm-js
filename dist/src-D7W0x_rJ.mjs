import{D as e,b as t,c as n,d as r,g as i,h as a,k as o,m as s,n as c,p as l,r as u,s as d,u as f,v as p,y as m}from"./jsx-runtime-D8TcwwYE.mjs";const h=new WeakMap,g=new WeakMap;function _(t,n,r){let i=h.get(t);i||(i=new Map,h.set(t,i));let a=i.get(n);return a||(a=e(r),i.set(n,a)),a}function v(e){if(g.has(e))return g.get(e);let n=new Proxy(e,{get(e,t,n){let r=Reflect.get(e,t,n);return typeof t==`symbol`?r:(s(_(e,t,r)),typeof r==`object`&&r?v(r):r)},set(e,n,r,i){return Reflect.get(e,n,i)!==r&&(Reflect.set(e,n,r,i),t(_(e,n,r),r)),!0},deleteProperty(e,n){let r=Reflect.deleteProperty(e,n);return r&&t(_(e,n,void 0),void 0),r}});return g.set(e,n),n}function y(e){let t=v(e);return[t,e=>{e(t)}]}function b(e,t){let r=t||Symbol(`context`);return{id:r,defaultValue:e,Provider:e=>{let t=i(),a=Object.create(t||null);return a[r]=e.value,m(a,()=>n(e.children))}}}function x(e){let t=a(e.id);return t===void 0?e.defaultValue:t}function S(e){return typeof e==`function`?e():e}function C(e){let t=document.createComment(`show`),r=[],i=!1,a=()=>{let t=Array.isArray(e.children)?e.children[0]:e.children;return n(typeof t==`function`?t():t)},s=()=>{if(!e.fallback)return null;let t=Array.isArray(e.fallback)?e.fallback[0]:e.fallback;return n(typeof t==`function`?t():t)},u=()=>{let n=S(e.when),o=t.parentNode;if(o)if(n){if(i&&r.length>0){for(let e of r)c(e),e.parentNode?.removeChild(e);r=[]}if(r.length===0||i){let e=a();e&&(e instanceof DocumentFragment?(r=Array.from(e.childNodes),o.insertBefore(e,t.nextSibling)):e instanceof Node&&(r=[e],o.insertBefore(e,t.nextSibling))),i=!1}}else{if(r.length>0&&!i){for(let e of r)c(e),e.parentNode?.removeChild(e);r=[]}if(e.fallback&&!i){let e=s();e&&(e instanceof DocumentFragment?(r=Array.from(e.childNodes),o.insertBefore(e,t.nextSibling)):e instanceof Node&&(r=[e],o.insertBefore(e,t.nextSibling)),i=!0)}else e.fallback||(i=!1)}},f=document.createDocumentFragment();return f.appendChild(t),d(t,()=>l(u)),o(u),f}function w(e){let t=document.createComment(`for`),r=new Map,i=[],a=e.key||((e,t)=>t),s=Array.isArray(e.children)?e.children[0]:e.children,u=document.createDocumentFragment();u.appendChild(t);let f=()=>{let o=S(e.each),l=t.parentNode||u,d=o.length,f=i.length;if(d===0&&f===0)return;let p=Array(d),m=0;for(;m<d;)p[m]=a(o[m],m),m++;if(f>0&&d>=f){let e=!0;for(let t=0;t<f;t++)if(i[t]!==p[t]){e=!1;break}if(e){let e=f&&r.get(i[f-1])?.node||t;for(let t=f;t<d;t++){let i=p[t],a={value:t},c=()=>a.value,u=n(s(o[t],c));if(u instanceof Node){let n={node:u,item:o[t],index:t,indexFn:c,indexRef:a};r.set(i,n),l.insertBefore(u,e.nextSibling),e=u}}i=p;return}}if(f>0&&d<=f){let e=0;for(let t=0;t<f&&e<d;t++)i[t]===p[e]&&e++;if(e===d){let e=new Set(p);for(let t of i)if(!e.has(t)){let e=r.get(t);e&&(c(e.node),e.node.parentNode?.removeChild(e.node),r.delete(t))}let n=t;for(let e=0;e<d;e++){let t=p[e],i=r.get(t);i&&(i.index=e,i.indexRef.value=e,n.nextSibling!==i.node&&l.insertBefore(i.node,n.nextSibling),n=i.node)}i=p;return}}let h=new Set(p);for(let e of i)if(!h.has(e)){let t=r.get(e);t&&(c(t.node),t.node.parentNode?.removeChild(t.node),r.delete(e))}let g=t;for(let e=0;e<d;e++){let t=o[e],i=p[e],a=r.get(i);if(a)a.item=t,a.index=e,a.indexRef.value=e,g.nextSibling!==a.node&&l.insertBefore(a.node,g.nextSibling);else{let o={value:e},c=()=>o.value,u=n(s(t,c));u instanceof Node&&(a={node:u,item:t,index:e,indexFn:c,indexRef:o},r.set(i,a),l.insertBefore(u,g.nextSibling))}a&&(g=a.node)}i=p};return d(t,()=>l(f)),o(f),u}function ee(e){let t=document.createComment(`switch`),r=[],i=-1,a=()=>e.fallback?typeof e.fallback==`function`?n(e.fallback()):n(e.fallback):null,s=()=>{let o=t.parentNode;if(!o)return;let s=-1,l=null,u=Array.isArray(e.children)?e.children:[e.children];for(let e=0;e<u.length;e++){let t=u[e],n=t;if(t&&typeof t==`object`&&t._brand===`component`){let e=t;n=e.type(e.props)}if(n&&typeof n==`object`&&`_isMatch`in n&&n._isMatch){let t=n;if(S(t.when)){s=e;let n=t.children;l=typeof n==`function`?n():n;break}}}if(s!==i){if(r.length>0){for(let e of r)c(e),e.parentNode?.removeChild(e);r=[]}i=s;let e=null;l?e=n(l):s===-1&&(e=a()),e&&(e instanceof DocumentFragment?(r=Array.from(e.childNodes),o.insertBefore(e,t.nextSibling)):e instanceof Node&&(r=[e],o.insertBefore(e,t.nextSibling)))}},u=document.createDocumentFragment();return u.appendChild(t),d(t,()=>l(s)),o(s),u}function T(e){return{_isMatch:!0,when:e.when,children:e.children}}const E=e(``);function D(e,t){if(!t)return e;let n=t.endsWith(`/`)?t.slice(0,-1):t;if(n&&e.startsWith(n)){let t=e.slice(n.length);return t.startsWith(`/`)?t:`/`+t}return e}function O(e,t){if(!t)return e;let n=t.endsWith(`/`)?t.slice(0,-1):t;return n?e===`/`?n+`/`:n+(e.startsWith(`/`)?e:`/`+e):e}const k=(e=``)=>typeof window>`u`?{path:`/`,query:``,hash:``}:{path:D(window.location.pathname,e),query:window.location.search,hash:window.location.hash},A=e(k()),j=b(null),M=b(null);function N(e){let t=typeof window<`u`&&window.location?window.location.href:`http://localhost/`;return t===`about:srcdoc`&&(t=`http://localhost/`),new URL(e,t)}function P(e){let t=N(e),n=s(E),r=D(t.pathname,n),i=t.search;for(let e of W.values()){let n=Q(e.pattern,r);if(n===null)continue;let a={path:r,query:i,hash:t.hash},o={params:n,search:t.searchParams,location:a};return X(q(e.routeId,o),()=>Promise.resolve(e.loader(o))).catch(()=>void 0)}return Promise.resolve(void 0)}function F(e){if(typeof window<`u`){let n=N(e),r=s(E),i=D(n.pathname,r),a=O(i,r)+n.search+n.hash,o={path:i,query:n.search,hash:n.hash};try{window.history.pushState(null,``,a)}catch(e){console.warn(`Router: history.pushState blocked`,e)}t(A,o)}}function te(e){typeof e.basename==`string`&&(t(E,e.basename),t(A,k(e.basename)));let r=()=>t(A,k(s(E)));typeof window<`u`&&(window.addEventListener(`popstate`,r),p(()=>window.removeEventListener(`popstate`,r)));let i=e.locationAtom??A,a=e.loaderCache??U,o={_brand:`component`,type:j.Provider,props:{value:i,children:{_brand:`component`,type:M.Provider,props:{value:a,children:e.children}}}};return typeof document>`u`?o:n(o)}function ne(e){return()=>{let t=x(L),n=s(x(j)??A),r=Array.isArray(e.children)?e.children:[e.children],i=[],a=[...r];for(;a.length;){let e=a.shift();Array.isArray(e)?a.unshift(...e):i.push(e)}for(let e of i){if(!e||typeof e!=`object`||e._brand!==`component`)continue;let r=e.props;if(!(!r||typeof r.path!=`string`)&&Q(r.path.startsWith(`/`)?r.path:Z(t||``,r.path),n.path)!==null)return e}return null}}const I=b({}),L=b(``),R=b(new URLSearchParams),z=b(void 0),B=b(null),V=b(null);function H(){return x(B)}const U=new Map;function re(e){let t={},n=e??U;for(let[e,r]of n.entries())r.status===`fulfilled`&&(t[e]={status:`fulfilled`,value:r.value}),r.status===`rejected`&&(t[e]={status:`rejected`,error:String(r.error??``)});return t}function ie(e,t){let n=t??U;if(e)for(let[t,r]of Object.entries(e))!r||typeof r!=`object`||(r.status===`fulfilled`&&n.set(t,{status:`fulfilled`,value:r.value}),r.status===`rejected`&&n.set(t,{status:`rejected`,error:Error(String(r.error??``))}))}const W=new Map,G=e(0);function K(e){if(!e||typeof e!=`object`)return JSON.stringify(e);let t=Object.keys(e).sort(),n={};for(let r of t)n[r]=e[r];return JSON.stringify(n)}function q(e,t){return`${e}|path=${t.location.path}|query=${t.location.query}|params=${K(t.params)}`}function J(e){for(let t of U.keys())t.startsWith(e+`|`)&&U.delete(t);t(G,e=>e+1)}const ae=J,Y=b(null);function oe(){let e=x(Y);e&&((x(M)??U).delete(e),t(G,e=>e+1))}function X(e,t,n=U){let r=n.get(e);if(r)return r.status===`fulfilled`?Promise.resolve(r.value):r.status===`rejected`?Promise.reject(r.error):r.promise;let i=Promise.resolve().then(t);return n.set(e,{status:`pending`,promise:i}),i.then(t=>n.set(e,{status:`fulfilled`,value:t}),t=>n.set(e,{status:`rejected`,error:t})),i}function se(e,t,n=U){let r=n.get(e);if(r){if(r.status===`fulfilled`)return r.value;throw r.status===`rejected`?r.error:r.promise}throw X(e,t,n)}function Z(e,t){let n=e.endsWith(`/`)?e.slice(0,-1):e,r=t.startsWith(`/`)?t:`/`+t;return n?n+r:r}function Q(e,t){if(e===`*`)return{};let n=e.endsWith(`*`),r=(n?e.slice(0,-1):e).split(`/`).filter(Boolean),i=t.split(`/`).filter(Boolean);if(!n&&r.length!==i.length||n&&i.length<r.length)return null;let a={};for(let e=0;e<r.length;e++){let t=r[e],n=i[e];if(t.startsWith(`:`)){a[t.slice(1)]=decodeURIComponent(n);continue}if(t!==n)return null}return a}function ce(r){let i=r.id||r.path;return()=>{let a=x(L),o=r.path.startsWith(`/`)?r.path:Z(a||``,r.path),c=s(x(j)??A),l=Q(o,c.path);if(l===null)return null;let u={...x(I)||{},...l||{}},d=new URLSearchParams(c.query||``),f={params:u,search:d,location:c},p=o.endsWith(`*`)?o.slice(0,-1):o,m,h=null;if(r.loader){s(G),h=q(i,f),W.set(`${i}|${o}`,{routeId:i,pattern:o,loader:r.loader});let e=x(M)??U;m=se(h,()=>Promise.resolve(r.loader(f)),e)}let g=e({pending:!1,error:void 0,data:void 0});if(r.action){let e=r.invalidateOnAction??!0;t(g,n=>({...n,run:async n=>{t(g,e=>({...e,pending:!0,error:void 0}));try{let i=await r.action(f,n);return t(g,e=>({...e,pending:!1,data:i})),e&&h&&((x(M)??U).delete(h),t(G,e=>e+1)),i}catch(e){throw t(g,t=>({...t,pending:!1,error:e})),e}}}))}let _={run:e=>{let t=s(g);return t.run?t.run(e):Promise.reject(Error(`No action registered for this route`))},pending:()=>s(g).pending,error:()=>s(g).error,data:()=>s(g).data},v=Array.isArray(r.children)?r.children:[r.children],y=v[0],b=v.slice(1),S=typeof y==`function`?()=>y(m,{...f,action:_}):y,C=null;if(b.length>0)for(let e of b){if(!e||typeof e!=`object`||e._brand!==`component`)continue;let t=e.props;if(!(!t||typeof t.path!=`string`)&&Q(t.path.startsWith(`/`)?t.path:Z(p||``,t.path),c.path)!==null){C=e;break}}let w={_brand:`component`,type:I.Provider,props:{value:u,children:{_brand:`component`,type:R.Provider,props:{value:d,children:{_brand:`component`,type:z.Provider,props:{value:m,children:{_brand:`component`,type:V.Provider,props:{value:g,children:{_brand:`component`,type:Y.Provider,props:{value:h,children:{_brand:`component`,type:L.Provider,props:{value:p,children:{_brand:`component`,type:B.Provider,props:{value:C,children:S}}}}}}}}}}}}}};return typeof document>`u`?w:n(w)}}function le(e){let t=t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0||(t.preventDefault(),F(e.href))},n=()=>{P(e.href)};return u(`a`,{...e,onClick:t,onMouseEnter:n},e.children)}function ue(e,t){return new Promise((n,r)=>{let i=setTimeout(()=>{t.removeEventListener(`abort`,a),n()},e),a=()=>{clearTimeout(i),r(new DOMException(`Aborted`,`AbortError`))};t.addEventListener(`abort`,a,{once:!0})})}function de(e,t,n){return typeof e.retryDelayMs==`function`?Math.max(0,e.retryDelayMs(t,n)):typeof e.retryDelayMs==`number`?Math.max(0,e.retryDelayMs):150*t}function fe(n,r,i){let a,o,c=i||{};arguments.length===1?(o=n,a=()=>void 0):arguments.length===2&&typeof r!=`function`?(o=n,a=()=>void 0,c=r||{}):(o=r,a=typeof n==`function`?n:()=>n);let l=Math.max(0,c.retries??0),u=e({value:c.initialValue,loading:!0,error:void 0}),d=null,m=null,h=async e=>{d&&d.abort(),d=new AbortController;let n=d.signal;t(u,e=>({...e,loading:!0,error:void 0}));let r=async()=>{let t=0;for(;;){t+=1;try{return await o(e,{signal:n})}catch(e){if(n.aborted||(c.onError?.(e,t),t>l))throw e;let r=de(c,t,e);r>0&&await ue(r,n)}}};try{let e=r();m=e;let i=await e;if(n.aborted)return;t(u,{value:i,loading:!1,error:void 0})}catch(e){if(n.aborted)return;t(u,t=>({...t,loading:!1,error:e}))}};f(()=>{h(a())}),p(()=>{d&&d.abort()});let g=()=>{let e=s(u);if(e.error)throw e.error;if(e.loading&&m)throw m;return e.value};return g.loading=()=>s(u).loading,g.error=()=>s(u).error,g.refetch=()=>h(a()),g.mutate=e=>t(u,{value:e,loading:!1,error:void 0}),g.state=u,g}const pe=Symbol.for(`vitrio.suspense`),me=Symbol.for(`vitrio.error`),he=b(void 0,pe);function ge(r){let i=e(0),a={increment:()=>t(i,e=>e+1),decrement:()=>t(i,e=>Math.max(0,e-1)),state:i};return{_brand:`component`,type:he.Provider,props:{value:a,children:()=>{if(typeof document>`u`)return n(r.children);if(s(i)>0)return n(r.fallback);try{return n(r.children)}catch(e){if(e&&typeof e.then==`function`)return a.increment(),e.then(a.decrement,a.decrement),n(r.fallback);throw e}}}}}const _e=b(void 0,me);function ve(r){let i=e(null);return{_brand:`component`,type:_e.Provider,props:{value:{handleError:e=>t(i,e)},children:()=>{let e=s(i);if(e){let t=r.fallback;return n(typeof t==`function`?t(e):t)}try{return n(r.children)}catch(e){t(i,e);let a=r.fallback;return n(typeof a==`function`?a(e):a)}}}}}function $(e,t){if(!t)throw Error(`Container element not found`);let i=t._dispose;for(typeof i==`function`&&(i(),t._dispose=void 0);t.firstChild;)c(t.firstChild),t.removeChild(t.firstChild);return r(r=>{t._dispose=r;let i=e;typeof i==`function`&&(i=i());let a=n(i);return a&&t.appendChild(a),r})}function ye(e,t){return $(e,t)}const be=$;function xe(e){if(typeof e!=`string`)return e;let t=e.trim();if(t===``)return t;if(t===`true`)return!0;if(t===`false`)return!1;if(t===`null`)return null;if(t===`undefined`)return;let n=Number(t);return!Number.isNaN(n)&&String(n)===t?n:e}function Se(e,t){let n={};for(let[r,i]of e.entries()){let e=i,a=t?xe(e):e;if(r in n){let e=n[r];n[r]=Array.isArray(e)?[...e,a]:[e,a]}else n[r]=a}return n}function Ce(e){let t=t=>{t.preventDefault();let n;if(e.value!==void 0)n=typeof e.value==`function`?e.value():e.value;else{let r=t.currentTarget;n=Se(new FormData(r),e.coerce??!0)}e.action.run(n)},n=e.disabled??!1,r=u(`form`,{onSubmit:t,"aria-busy":()=>e.action.pending()?`true`:`false`,style:()=>e.action.pending()||n?`pointer-events:none;opacity:0.7;`:``},e.children);return e.showError?u(`div`,{},r,()=>{let t=e.action.error();return t?u(`pre`,{style:`color:#b00020;white-space:pre-wrap;margin:0.5rem 0 0;`},t instanceof Error?t.stack||t.message:String(t)):null}):r}export{y as A,K as C,ee as D,C as E,b as O,P as S,T,J as _,ve as a,Q as b,le as c,te as d,ne as f,oe as g,ae as h,$ as i,x as k,H as l,ie as m,ye as n,ge as o,re as p,be as r,fe as s,Ce as t,ce as u,A as v,w,F as x,q as y};
//# sourceMappingURL=src-D7W0x_rJ.mjs.map