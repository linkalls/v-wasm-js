const e=new Set([`area`,`base`,`br`,`col`,`embed`,`hr`,`img`,`input`,`link`,`meta`,`param`,`source`,`track`,`wbr`]);function t(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#039;`)}function n(r){if(r==null||r===!1||r===!0)return``;if(typeof r==`string`||typeof r==`number`)return t(String(r));if(Array.isArray(r))return r.map(n).join(``);if(typeof r==`function`)try{return n(r())}catch(e){if(e&&typeof e.then==`function`)throw e;return console.error(`Error executing reactive function in SSR:`,e),``}if(typeof r==`object`){if(`_brand`in r&&r._brand===`component`){let e=r;try{return n(e.type(e.props))}catch(e){throw e&&e.then,e}}if(`_brand`in r&&r._brand===`server-element`){let i=r,a=i.type,o=``,s=``,c=Object.keys(i.props);for(let e of c){if(e===`children`||e===`ref`||e.startsWith(`on`))continue;let n=i.props[e];if(typeof n==`function`)try{n=n()}catch{n=void 0}if(e===`innerHTML`||e===`textContent`){let r=String(n??``);s=e===`textContent`?t(r):r;continue}if(n===!0)o+=` ${e}`;else if(n!==!1&&n!=null)if(e===`style`&&typeof n==`object`){let e=Object.entries(n).map(([e,t])=>`${e.replace(/([A-Z])/g,`-$1`).toLowerCase()}:${t}`).join(`;`);o+=` style="${t(e)}"`}else e===`class`||e===`className`?o+=` class="${t(String(n))}"`:o+=` ${e}="${t(String(n))}"`}if(e.has(a))return`<${a}${o} />`;let l=s||i.children.map(n).join(``);return`<${a}${o}>${l}</${a}>`}}return``}async function r(e){for(let t=0;t<50;t++)try{return n(e)}catch(e){if(e&&typeof e.then==`function`){await e;continue}throw e}throw Error(`renderToStringAsync exceeded retry limit (possible infinite suspense loop)`)}export{n as renderToString,r as renderToStringAsync};
//# sourceMappingURL=server.mjs.map