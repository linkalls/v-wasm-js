import{C as e,D as t,E as n,O as r,S as i,T as a,_ as o,b as s,c,d as l,f as u,g as d,h as f,k as p,l as m,m as h,n as g,p as _,r as v,s as y,u as b,v as x,w as S,x as C,y as w}from"./jsx-runtime-BsB6KTaB.mjs";const T=new WeakMap,E=new WeakMap;function D(e,n,r){let i=T.get(e);i||(i=new Map,T.set(e,i));let a=i.get(n);return a||(a=t(r),i.set(n,a)),a}function O(e){if(E.has(e))return E.get(e);let t=new Proxy(e,{get(e,t,n){let r=Reflect.get(e,t,n);return typeof t==`symbol`?r:(h(D(e,t,r)),typeof r==`object`&&r?O(r):r)},set(e,t,n,r){return Reflect.get(e,t,r)!==n&&(Reflect.set(e,t,n,r),s(D(e,t,n),n)),!0},deleteProperty(e,t){let n=Reflect.deleteProperty(e,t);return n&&s(D(e,t,void 0),void 0),n}});return E.set(e,t),t}function k(e){let t=O(e);return[t,e=>{e(t)}]}function A(e,t){let n=t||Symbol(`context`);return{id:n,defaultValue:e,Provider:e=>{let t=d(),r=Object.create(t||null);return r[n]=e.value,w(r,()=>c(e.children))}}}function j(e){let t=f(e.id);return t===void 0?e.defaultValue:t}function M(e){return typeof e==`function`?e():e}function N(e){let t=document.createComment(`show`),n=[],r=!1,i=()=>{let t=Array.isArray(e.children)?e.children[0]:e.children;return c(typeof t==`function`?t():t)},a=()=>{if(!e.fallback)return null;let t=Array.isArray(e.fallback)?e.fallback[0]:e.fallback;return c(typeof t==`function`?t():t)},o=()=>{let o=M(e.when),s=t.parentNode;if(s)if(o){if(r&&n.length>0){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}if(n.length===0||r){let e=i();e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),s.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],s.insertBefore(e,t.nextSibling))),r=!1}}else{if(n.length>0&&!r){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}if(e.fallback&&!r){let e=a();e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),s.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],s.insertBefore(e,t.nextSibling)),r=!0)}else e.fallback||(r=!1)}},s=document.createDocumentFragment();return s.appendChild(t),y(t,()=>_(o)),p(o),s}function ee(e){let t=document.createComment(`for`),n=new Map,r=[],i=e.key||((e,t)=>t),a=Array.isArray(e.children)?e.children[0]:e.children,o=document.createDocumentFragment();o.appendChild(t);let s=()=>{let s=M(e.each),l=t.parentNode||o,u=s.length,d=r.length;if(u===0&&d===0)return;let f=Array(u),p=0;for(;p<u;)f[p]=i(s[p],p),p++;if(d>0&&u>=d){let e=!0;for(let t=0;t<d;t++)if(r[t]!==f[t]){e=!1;break}if(e){let e=d&&n.get(r[d-1])?.node||t;for(let t=d;t<u;t++){let r=f[t],i={value:t},o=()=>i.value,u=c(a(s[t],o));if(u instanceof Node){let a={node:u,item:s[t],index:t,indexFn:o,indexRef:i};n.set(r,a),l.insertBefore(u,e.nextSibling),e=u}}r=f;return}}if(d>0&&u<=d){let e=0;for(let t=0;t<d&&e<u;t++)r[t]===f[e]&&e++;if(e===u){let e=new Set(f);for(let t of r)if(!e.has(t)){let e=n.get(t);e&&(g(e.node),e.node.parentNode?.removeChild(e.node),n.delete(t))}let i=t;for(let e=0;e<u;e++){let t=f[e],r=n.get(t);r&&(r.index=e,r.indexRef.value=e,i.nextSibling!==r.node&&l.insertBefore(r.node,i.nextSibling),i=r.node)}r=f;return}}let m=new Set(f);for(let e of r)if(!m.has(e)){let t=n.get(e);t&&(g(t.node),t.node.parentNode?.removeChild(t.node),n.delete(e))}let h=t;for(let e=0;e<u;e++){let t=s[e],r=f[e],i=n.get(r);if(i)i.item=t,i.index=e,i.indexRef.value=e,h.nextSibling!==i.node&&l.insertBefore(i.node,h.nextSibling);else{let o={value:e},s=()=>o.value,u=c(a(t,s));u instanceof Node&&(i={node:u,item:t,index:e,indexFn:s,indexRef:o},n.set(r,i),l.insertBefore(u,h.nextSibling))}i&&(h=i.node)}r=f};return y(t,()=>_(s)),p(s),o}function te(e){let t=document.createComment(`switch`),n=[],r=-1,i=()=>e.fallback?typeof e.fallback==`function`?c(e.fallback()):c(e.fallback):null,a=()=>{let a=t.parentNode;if(!a)return;let o=-1,s=null,l=Array.isArray(e.children)?e.children:[e.children];for(let e=0;e<l.length;e++){let t=l[e],n=t;if(t&&typeof t==`object`&&t._brand===`component`){let e=t;n=e.type(e.props)}if(n&&typeof n==`object`&&`_isMatch`in n&&n._isMatch){let t=n;if(M(t.when)){o=e;let n=t.children;s=typeof n==`function`?n():n;break}}}if(o!==r){if(n.length>0){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}r=o;let e=null;s?e=c(s):o===-1&&(e=i()),e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),a.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],a.insertBefore(e,t.nextSibling)))}},o=document.createDocumentFragment();return o.appendChild(t),y(t,()=>_(a)),p(a),o}function P(e){return{_isMatch:!0,when:e.when,children:e.children}}const F=()=>typeof window>`u`?{path:`/`,query:``,hash:``}:{path:window.location.pathname,query:window.location.search,hash:window.location.hash},I=t(F());function L(e){typeof window<`u`&&(window.history.pushState(null,``,e),s(I,F()))}function R(e){let t=()=>s(I,F());return typeof window<`u`&&(window.addEventListener(`popstate`,t),x(()=>window.removeEventListener(`popstate`,t))),e.children}const z=A({}),B=A(new URLSearchParams),V=A(void 0),H=A(null),U=new Map;function W(e){for(let t of U.keys())t.startsWith(e)&&U.delete(t)}function G(e,t){let n=U.get(e);if(n){if(n.status===`fulfilled`)return n.value;throw n.status===`rejected`?n.error:n.promise}let r=Promise.resolve().then(t);throw U.set(e,{status:`pending`,promise:r}),r.then(t=>U.set(e,{status:`fulfilled`,value:t}),t=>U.set(e,{status:`rejected`,error:t})),r}function K(e,t){if(e===`*`)return{};if(e.endsWith(`*`)){let n=e.slice(0,-1);return t.startsWith(n)?{}:null}let n=e.split(`/`).filter(Boolean),r=t.split(`/`).filter(Boolean);if(n.length!==r.length)return null;let i={};for(let e=0;e<n.length;e++){let t=n[e],a=r[e];if(t.startsWith(`:`)){i[t.slice(1)]=decodeURIComponent(a);continue}if(t!==a)return null}return i}function q(e){let n=e.id||e.path;return N({when:()=>{let t=h(I);return K(e.path,t.path)!==null},children:()=>{let r=h(I),i=K(e.path,r.path)||{},a=new URLSearchParams(r.query||``),o={params:i,search:a,location:r},l;e.loader&&(l=G(`${n}?${r.query}|${r.path}`,()=>Promise.resolve(e.loader(o))));let u=t({pending:!1,error:void 0,data:void 0});if(e.action){let t=e.invalidateOnAction??!0;s(u,r=>({...r,run:async i=>{s(u,{pending:!0,error:void 0,data:r.data,run:r.run});try{let r=await e.action(o,i);return s(u,e=>({...e,pending:!1,data:r})),t&&W(n),r}catch(e){throw s(u,t=>({...t,pending:!1,error:e})),e}}}))}let d=typeof e.children==`function`?e.children(l):e.children;return c({_brand:`component`,type:z.Provider,props:{value:i,children:{_brand:`component`,type:B.Provider,props:{value:a,children:{_brand:`component`,type:V.Provider,props:{value:l,children:{_brand:`component`,type:H.Provider,props:{value:u,children:d}}}}}}}})}})}function J(e){let t=t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0||(t.preventDefault(),L(e.href))};return v(`a`,{...e,onClick:t},e.children)}function Y(e,t){return new Promise((n,r)=>{let i=setTimeout(()=>{t.removeEventListener(`abort`,a),n()},e),a=()=>{clearTimeout(i),r(new DOMException(`Aborted`,`AbortError`))};t.addEventListener(`abort`,a,{once:!0})})}function X(e,t,n){return typeof e.retryDelayMs==`function`?Math.max(0,e.retryDelayMs(t,n)):typeof e.retryDelayMs==`number`?Math.max(0,e.retryDelayMs):150*t}function Z(e,n,r){let i,a,o=r||{};arguments.length===1?(a=e,i=()=>void 0):arguments.length===2&&typeof n!=`function`?(a=e,i=()=>void 0,o=n||{}):(a=n,i=typeof e==`function`?e:()=>e);let c=Math.max(0,o.retries??0),l=t({value:o.initialValue,loading:!0,error:void 0}),u=null,d=null,f=async e=>{u&&u.abort(),u=new AbortController;let t=u.signal;s(l,e=>({...e,loading:!0,error:void 0}));let n=async()=>{let n=0;for(;;){n+=1;try{return await a(e,{signal:t})}catch(e){if(t.aborted||(o.onError?.(e,n),n>c))throw e;let r=X(o,n,e);r>0&&await Y(r,t)}}};try{let e=n();d=e;let r=await e;if(t.aborted)return;s(l,{value:r,loading:!1,error:void 0})}catch(e){if(t.aborted)return;s(l,t=>({...t,loading:!1,error:e}))}};b(()=>{f(i())}),x(()=>{u&&u.abort()});let p=()=>{let e=h(l);if(e.error)throw e.error;if(e.loading&&d)throw d;return e.value};return p.loading=()=>h(l).loading,p.error=()=>h(l).error,p.refetch=()=>f(i()),p.mutate=e=>s(l,{value:e,loading:!1,error:void 0}),p.state=l,p}const ne=Symbol.for(`vitrio.suspense`),Q=Symbol.for(`vitrio.error`),re=A(void 0,ne);function ie(e){let n=t(0),r={increment:()=>s(n,e=>e+1),decrement:()=>s(n,e=>Math.max(0,e-1)),state:n};return{_brand:`component`,type:re.Provider,props:{value:r,children:()=>{if(h(n)>0)return c(e.fallback);try{return c(e.children)}catch(t){if(t&&typeof t.then==`function`)return r.increment(),t.then(r.decrement,r.decrement),c(e.fallback);throw t}}}}}const ae=A(void 0,Q);function oe(e){let n=t(null);return{_brand:`component`,type:ae.Provider,props:{value:{handleError:e=>s(n,e)},children:()=>{let t=h(n);if(t){let n=e.fallback;return c(typeof n==`function`?n(t):n)}try{return c(e.children)}catch(t){s(n,t);let r=e.fallback;return c(typeof r==`function`?r(t):r)}}}}}function $(e,t){if(!t)throw Error(`Container element not found`);let n=t._dispose;for(typeof n==`function`&&(n(),t._dispose=void 0);t.firstChild;)g(t.firstChild),t.removeChild(t.firstChild);return l(n=>{t._dispose=n;let r=e;typeof r==`function`&&(r=r());let i=c(r);return i&&t.appendChild(i),n})}const se=$;export{J as A,oe as ErrorBoundary,ee as For,P as Match,q as Route,R as Router,N as Show,ie as Suspense,te as Switch,m as batch,A as createContext,b as createEffect,Z as createResource,l as createRoot,k as createStore,u as derive,h as get,o as initWasm,I as location,se as mount,L as navigate,x as onCleanup,$ as render,s as set,C as startTransition,i as subscribe,e as untrack,S as use,j as useContext,a as useSet,n as useValue,t as v,r as wasm,p as withRenderContext};
//# sourceMappingURL=index.mjs.map