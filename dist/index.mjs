import{C as e,D as t,E as n,O as r,S as i,T as a,_ as o,b as s,c,d as l,f as u,g as d,h as f,k as p,l as m,m as h,n as g,p as _,r as v,s as y,u as b,v as x,w as S,x as C,y as ee}from"./jsx-runtime-DCobjx-D.mjs";const w=new WeakMap,T=new WeakMap;function E(e,n,r){let i=w.get(e);i||(i=new Map,w.set(e,i));let a=i.get(n);return a||(a=t(r),i.set(n,a)),a}function D(e){if(T.has(e))return T.get(e);let t=new Proxy(e,{get(e,t,n){let r=Reflect.get(e,t,n);return typeof t==`symbol`?r:(h(E(e,t,r)),typeof r==`object`&&r?D(r):r)},set(e,t,n,r){return Reflect.get(e,t,r)!==n&&(Reflect.set(e,t,n,r),s(E(e,t,n),n)),!0},deleteProperty(e,t){let n=Reflect.deleteProperty(e,t);return n&&s(E(e,t,void 0),void 0),n}});return T.set(e,t),t}function te(e){let t=D(e);return[t,e=>{e(t)}]}function O(e,t){let n=t||Symbol(`context`);return{id:n,defaultValue:e,Provider:e=>{let t=d(),r=Object.create(t||null);return r[n]=e.value,ee(r,()=>typeof document>`u`?e.children:c(e.children))}}}function k(e){let t=f(e.id);return t===void 0?e.defaultValue:t}function A(e){return typeof e==`function`?e():e}function ne(e){let t=document.createComment(`show`),n=[],r=!1,i=()=>{let t=Array.isArray(e.children)?e.children[0]:e.children;return c(typeof t==`function`?t():t)},a=()=>{if(!e.fallback)return null;let t=Array.isArray(e.fallback)?e.fallback[0]:e.fallback;return c(typeof t==`function`?t():t)},o=()=>{let o=A(e.when),s=t.parentNode;if(s)if(o){if(r&&n.length>0){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}if(n.length===0||r){let e=i();e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),s.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],s.insertBefore(e,t.nextSibling))),r=!1}}else{if(n.length>0&&!r){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}if(e.fallback&&!r){let e=a();e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),s.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],s.insertBefore(e,t.nextSibling)),r=!0)}else e.fallback||(r=!1)}},s=document.createDocumentFragment();return s.appendChild(t),y(t,()=>_(o)),p(o),s}function re(e){let t=document.createComment(`for`),n=new Map,r=[],i=e.key||((e,t)=>t),a=Array.isArray(e.children)?e.children[0]:e.children,o=document.createDocumentFragment();o.appendChild(t);let s=()=>{let s=A(e.each),l=t.parentNode||o,u=s.length,d=r.length;if(u===0&&d===0)return;let f=Array(u),p=0;for(;p<u;)f[p]=i(s[p],p),p++;if(d>0&&u>=d){let e=!0;for(let t=0;t<d;t++)if(r[t]!==f[t]){e=!1;break}if(e){let e=d&&n.get(r[d-1])?.node||t;for(let t=d;t<u;t++){let r=f[t],i={value:t},o=()=>i.value,u=c(a(s[t],o));if(u instanceof Node){let a={node:u,item:s[t],index:t,indexFn:o,indexRef:i};n.set(r,a),l.insertBefore(u,e.nextSibling),e=u}}r=f;return}}if(d>0&&u<=d){let e=0;for(let t=0;t<d&&e<u;t++)r[t]===f[e]&&e++;if(e===u){let e=new Set(f);for(let t of r)if(!e.has(t)){let e=n.get(t);e&&(g(e.node),e.node.parentNode?.removeChild(e.node),n.delete(t))}let i=t;for(let e=0;e<u;e++){let t=f[e],r=n.get(t);r&&(r.index=e,r.indexRef.value=e,i.nextSibling!==r.node&&l.insertBefore(r.node,i.nextSibling),i=r.node)}r=f;return}}let m=new Set(f);for(let e of r)if(!m.has(e)){let t=n.get(e);t&&(g(t.node),t.node.parentNode?.removeChild(t.node),n.delete(e))}let h=t;for(let e=0;e<u;e++){let t=s[e],r=f[e],i=n.get(r);if(i)i.item=t,i.index=e,i.indexRef.value=e,h.nextSibling!==i.node&&l.insertBefore(i.node,h.nextSibling);else{let o={value:e},s=()=>o.value,u=c(a(t,s));u instanceof Node&&(i={node:u,item:t,index:e,indexFn:s,indexRef:o},n.set(r,i),l.insertBefore(u,h.nextSibling))}i&&(h=i.node)}r=f};return y(t,()=>_(s)),p(s),o}function j(e){let t=document.createComment(`switch`),n=[],r=-1,i=()=>e.fallback?typeof e.fallback==`function`?c(e.fallback()):c(e.fallback):null,a=()=>{let a=t.parentNode;if(!a)return;let o=-1,s=null,l=Array.isArray(e.children)?e.children:[e.children];for(let e=0;e<l.length;e++){let t=l[e],n=t;if(t&&typeof t==`object`&&t._brand===`component`){let e=t;n=e.type(e.props)}if(n&&typeof n==`object`&&`_isMatch`in n&&n._isMatch){let t=n;if(A(t.when)){o=e;let n=t.children;s=typeof n==`function`?n():n;break}}}if(o!==r){if(n.length>0){for(let e of n)g(e),e.parentNode?.removeChild(e);n=[]}r=o;let e=null;s?e=c(s):o===-1&&(e=i()),e&&(e instanceof DocumentFragment?(n=Array.from(e.childNodes),a.insertBefore(e,t.nextSibling)):e instanceof Node&&(n=[e],a.insertBefore(e,t.nextSibling)))}},o=document.createDocumentFragment();return o.appendChild(t),y(t,()=>_(a)),p(a),o}function ie(e){return{_isMatch:!0,when:e.when,children:e.children}}const M=t(``);function N(e,t){if(!t)return e;let n=t.endsWith(`/`)?t.slice(0,-1):t;if(n&&e.startsWith(n)){let t=e.slice(n.length);return t.startsWith(`/`)?t:`/`+t}return e}function ae(e,t){if(!t)return e;let n=t.endsWith(`/`)?t.slice(0,-1):t;return n?e===`/`?n+`/`:n+(e.startsWith(`/`)?e:`/`+e):e}const P=(e=``)=>typeof window>`u`?{path:`/`,query:``,hash:``}:{path:N(window.location.pathname,e),query:window.location.search,hash:window.location.hash},F=t(P());function I(e){let t=typeof window<`u`&&window.location?window.location.href:`http://localhost/`;return t===`about:srcdoc`&&(t=`http://localhost/`),new URL(e,t)}function L(e){let t=I(e),n=h(M),r=N(t.pathname,n),i=t.search;for(let e of W.values()){let n=Q(e.pattern,r);if(n===null)continue;let a={path:r,query:i,hash:t.hash},o={params:n,search:t.searchParams,location:a};return X(q(e.routeId,o),()=>Promise.resolve(e.loader(o))).catch(()=>void 0)}return Promise.resolve(void 0)}function R(e){if(typeof window<`u`){let t=I(e),n=h(M),r=N(t.pathname,n),i=ae(r,n)+t.search+t.hash,a={path:r,query:t.search,hash:t.hash};try{window.history.pushState(null,``,i)}catch(e){console.warn(`Router: history.pushState blocked`,e)}s(F,a)}}function oe(e){typeof e.basename==`string`&&(s(M,e.basename),s(F,P(e.basename)));let t=()=>s(F,P(h(M)));return typeof window<`u`&&(window.addEventListener(`popstate`,t),x(()=>window.removeEventListener(`popstate`,t))),e.children}function se(e){return()=>{let t=k(B),n=h(F),r=Array.isArray(e.children)?e.children:[e.children];for(let e of r){if(!e||typeof e!=`object`||e._brand!==`component`)continue;let r=e.props;if(!(!r||typeof r.path!=`string`)&&Q(r.path.startsWith(`/`)?r.path:Z(t||``,r.path),n.path)!==null)return e}return null}}const z=O({}),B=O(``),ce=O(new URLSearchParams),le=O(void 0),V=O(null),ue=O(null);function H(){return k(V)}const U=new Map;function de(){let e={};for(let[t,n]of U.entries())n.status===`fulfilled`&&(e[t]={status:`fulfilled`,value:n.value}),n.status===`rejected`&&(e[t]={status:`rejected`,error:String(n.error??``)});return e}function fe(e){if(e)for(let[t,n]of Object.entries(e))!n||typeof n!=`object`||(n.status===`fulfilled`&&U.set(t,{status:`fulfilled`,value:n.value}),n.status===`rejected`&&U.set(t,{status:`rejected`,error:Error(String(n.error??``))}))}const W=new Map,G=t(0);function K(e){if(!e||typeof e!=`object`)return JSON.stringify(e);let t=Object.keys(e).sort(),n={};for(let r of t)n[r]=e[r];return JSON.stringify(n)}function q(e,t){return`${e}|path=${t.location.path}|query=${t.location.query}|params=${K(t.params)}`}function J(e){for(let t of U.keys())t.startsWith(e+`|`)&&U.delete(t);s(G,e=>e+1)}const pe=J,Y=O(null);function me(){let e=k(Y);e&&(U.delete(e),s(G,e=>e+1))}function X(e,t){let n=U.get(e);if(n)return n.status===`fulfilled`?Promise.resolve(n.value):n.status===`rejected`?Promise.reject(n.error):n.promise;let r=Promise.resolve().then(t);return U.set(e,{status:`pending`,promise:r}),r.then(t=>U.set(e,{status:`fulfilled`,value:t}),t=>U.set(e,{status:`rejected`,error:t})),r}function he(e,t){let n=U.get(e);if(n){if(n.status===`fulfilled`)return n.value;throw n.status===`rejected`?n.error:n.promise}throw X(e,t)}function Z(e,t){let n=e.endsWith(`/`)?e.slice(0,-1):e,r=t.startsWith(`/`)?t:`/`+t;return n?n+r:r}function Q(e,t){if(e===`*`)return{};let n=e.endsWith(`*`),r=(n?e.slice(0,-1):e).split(`/`).filter(Boolean),i=t.split(`/`).filter(Boolean);if(!n&&r.length!==i.length||n&&i.length<r.length)return null;let a={};for(let e=0;e<r.length;e++){let t=r[e],n=i[e];if(t.startsWith(`:`)){a[t.slice(1)]=decodeURIComponent(n);continue}if(t!==n)return null}return a}function ge(e){let n=e.id||e.path;return()=>{let r=k(B),i=e.path.startsWith(`/`)?e.path:Z(r||``,e.path),a=h(F),o=Q(i,a.path);if(o===null)return null;let l={...k(z)||{},...o||{}},u=new URLSearchParams(a.query||``),d={params:l,search:u,location:a},f=i.endsWith(`*`)?i.slice(0,-1):i,p,m=null;e.loader&&(h(G),m=q(n,d),W.set(`${n}|${i}`,{routeId:n,pattern:i,loader:e.loader}),p=he(m,()=>Promise.resolve(e.loader(d))));let g=t({pending:!1,error:void 0,data:void 0});if(e.action){let t=e.invalidateOnAction??!0;s(g,n=>({...n,run:async n=>{s(g,e=>({...e,pending:!0,error:void 0}));try{let r=await e.action(d,n);return s(g,e=>({...e,pending:!1,data:r})),t&&m&&(U.delete(m),s(G,e=>e+1)),r}catch(e){throw s(g,t=>({...t,pending:!1,error:e})),e}}}))}let _={run:e=>{let t=h(g);return t.run?t.run(e):Promise.reject(Error(`No action registered for this route`))},pending:()=>h(g).pending,error:()=>h(g).error,data:()=>h(g).data},v=Array.isArray(e.children)?e.children:[e.children],y=v[0],b=v.slice(1),x=typeof y==`function`?()=>y(p,{...d,action:_}):y,S=null;if(b.length>0)for(let e of b){if(!e||typeof e!=`object`||e._brand!==`component`)continue;let t=e.props;if(!(!t||typeof t.path!=`string`)&&Q(t.path.startsWith(`/`)?t.path:Z(f||``,t.path),a.path)!==null){S=e;break}}let C={_brand:`component`,type:z.Provider,props:{value:l,children:{_brand:`component`,type:ce.Provider,props:{value:u,children:{_brand:`component`,type:le.Provider,props:{value:p,children:{_brand:`component`,type:ue.Provider,props:{value:g,children:{_brand:`component`,type:Y.Provider,props:{value:m,children:{_brand:`component`,type:B.Provider,props:{value:f,children:{_brand:`component`,type:V.Provider,props:{value:S,children:x}}}}}}}}}}}}}};return typeof document>`u`?C:c(C)}}function _e(e){let t=t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0||(t.preventDefault(),R(e.href))},n=()=>{L(e.href)};return v(`a`,{...e,onClick:t,onMouseEnter:n},e.children)}function ve(e,t){return new Promise((n,r)=>{let i=setTimeout(()=>{t.removeEventListener(`abort`,a),n()},e),a=()=>{clearTimeout(i),r(new DOMException(`Aborted`,`AbortError`))};t.addEventListener(`abort`,a,{once:!0})})}function ye(e,t,n){return typeof e.retryDelayMs==`function`?Math.max(0,e.retryDelayMs(t,n)):typeof e.retryDelayMs==`number`?Math.max(0,e.retryDelayMs):150*t}function be(e,n,r){let i,a,o=r||{};arguments.length===1?(a=e,i=()=>void 0):arguments.length===2&&typeof n!=`function`?(a=e,i=()=>void 0,o=n||{}):(a=n,i=typeof e==`function`?e:()=>e);let c=Math.max(0,o.retries??0),l=t({value:o.initialValue,loading:!0,error:void 0}),u=null,d=null,f=async e=>{u&&u.abort(),u=new AbortController;let t=u.signal;s(l,e=>({...e,loading:!0,error:void 0}));let n=async()=>{let n=0;for(;;){n+=1;try{return await a(e,{signal:t})}catch(e){if(t.aborted||(o.onError?.(e,n),n>c))throw e;let r=ye(o,n,e);r>0&&await ve(r,t)}}};try{let e=n();d=e;let r=await e;if(t.aborted)return;s(l,{value:r,loading:!1,error:void 0})}catch(e){if(t.aborted)return;s(l,t=>({...t,loading:!1,error:e}))}};b(()=>{f(i())}),x(()=>{u&&u.abort()});let p=()=>{let e=h(l);if(e.error)throw e.error;if(e.loading&&d)throw d;return e.value};return p.loading=()=>h(l).loading,p.error=()=>h(l).error,p.refetch=()=>f(i()),p.mutate=e=>s(l,{value:e,loading:!1,error:void 0}),p.state=l,p}const xe=Symbol.for(`vitrio.suspense`),Se=Symbol.for(`vitrio.error`),Ce=O(void 0,xe);function we(e){let n=t(0),r={increment:()=>s(n,e=>e+1),decrement:()=>s(n,e=>Math.max(0,e-1)),state:n};return{_brand:`component`,type:Ce.Provider,props:{value:r,children:()=>{if(h(n)>0)return c(e.fallback);try{return c(e.children)}catch(t){if(t&&typeof t.then==`function`)return r.increment(),t.then(r.decrement,r.decrement),c(e.fallback);throw t}}}}}const Te=O(void 0,Se);function Ee(e){let n=t(null);return{_brand:`component`,type:Te.Provider,props:{value:{handleError:e=>s(n,e)},children:()=>{let t=h(n);if(t){let n=e.fallback;return c(typeof n==`function`?n(t):n)}try{return c(e.children)}catch(t){s(n,t);let r=e.fallback;return c(typeof r==`function`?r(t):r)}}}}}function $(e,t){if(!t)throw Error(`Container element not found`);let n=t._dispose;for(typeof n==`function`&&(n(),t._dispose=void 0);t.firstChild;)g(t.firstChild),t.removeChild(t.firstChild);return l(n=>{t._dispose=n;let r=e;typeof r==`function`&&(r=r());let i=c(r);return i&&t.appendChild(i),n})}const De=$;function Oe(e){if(typeof e!=`string`)return e;let t=e.trim();if(t===``)return t;if(t===`true`)return!0;if(t===`false`)return!1;if(t===`null`)return null;if(t===`undefined`)return;let n=Number(t);return!Number.isNaN(n)&&String(n)===t?n:e}function ke(e,t){let n={};for(let[r,i]of e.entries()){let e=i,a=t?Oe(e):e;if(r in n){let e=n[r];n[r]=Array.isArray(e)?[...e,a]:[e,a]}else n[r]=a}return n}function Ae(e){let t=t=>{t.preventDefault();let n;if(e.value!==void 0)n=typeof e.value==`function`?e.value():e.value;else{let r=t.currentTarget;n=ke(new FormData(r),e.coerce??!0)}e.action.run(n)},n=e.disabled??!1,r=v(`form`,{onSubmit:t,"aria-busy":()=>e.action.pending()?`true`:`false`,style:()=>e.action.pending()||n?`pointer-events:none;opacity:0.7;`:``},e.children);return e.showError?v(`div`,{},r,()=>{let t=e.action.error();return t?v(`pre`,{style:`color:#b00020;white-space:pre-wrap;margin:0.5rem 0 0;`},t instanceof Error?t.stack||t.message:String(t)):null}):r}export{_e as A,Ee as ErrorBoundary,re as For,Ae as Form,ie as Match,H as Outlet,ge as Route,oe as Router,se as Routes,ne as Show,we as Suspense,j as Switch,m as batch,O as createContext,b as createEffect,be as createResource,l as createRoot,te as createStore,de as dehydrateLoaderCache,u as derive,h as get,fe as hydrateLoaderCache,o as initWasm,pe as invalidate,me as invalidateCurrent,J as invalidateRoute,F as location,De as mount,R as navigate,x as onCleanup,L as prefetch,$ as render,s as set,C as startTransition,i as subscribe,e as untrack,S as use,k as useContext,a as useSet,n as useValue,t as v,r as wasm,p as withRenderContext};
//# sourceMappingURL=index.mjs.map